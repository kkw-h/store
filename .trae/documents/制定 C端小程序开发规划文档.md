我将为项目创建一份详细的 **C端小程序开发规划文档** (`docs/C端小程序开发规划.md`)，整合现有的产品文档、API规划和数据库设计，指导后续开发。

### 文档结构概览

1.  **项目概述**
    *   **核心功能**: 社区团购/外卖模式，支持"配送"与"自提"双模式。
    *   **目标用户**: 社区居民。
    *   **关键指标**: 下单转化率、自提核销率、页面加载速度 < 2s。

2.  **功能需求 (Detailed)**
    *   **用户认证**: 微信一键登录，JWT 鉴权。
    *   **商品展示**: 首页 Banner，分类侧边栏，商品详情 (多规格预留)。
    *   **购物车**: 本地缓存 + 服务端校验，实时金额计算。
    *   **订单交易**:
        *   **配送模式**: 地址管理 -> 下单 -> 商家接单 -> 配送 -> 送达。
        *   **自提模式**: 选择时间 -> 下单 -> 生成核销码 -> 到店扫码。
    *   **个人中心**: 订单状态流转查看 (待接单/待自提/配送中)，地址簿管理。

3.  **技术方案**
    *   **前端框架**: Uni-app + Vue 3 + TypeScript + Vite。
    *   **UI 组件库**: 使用 Uni-ui 或原生样式 (保持轻量)。
    *   **状态管理**: Pinia (处理购物车、用户信息)。
    *   **数据交互**: 封装 `uni.request`，统一拦截处理 Token 和错误码。

4.  **开发计划 (3周 MVP)**
    *   **Phase 1 (W1)**: 基础架构搭建，静态页面 (首页/分类/购物车/我的)。
    *   **Phase 2 (W2)**: 核心交易链路联调 (登录 -> 下单 -> 支付 -> 状态流转)。
    *   **Phase 3 (W3)**: 体验优化，自提核销闭环，Bug修复与UI微调。

5.  **测试方案**
    *   **单元测试**: 核心工具类 (金额计算、时间格式化)。
    *   **集成测试**: 完整下单流程测试 (Mock 支付)。
    *   **真机测试**: 重点验证 iOS/Android 兼容性及微信支付回调。

6.  **部署与发布**
    *   **版本控制**: Git Flow (main, develop, feature/*)。
    *   **发布流程**: 微信开发者工具上传 -> 体验版 -> 提交审核 -> 正式版。

### 执行步骤
1.  编写并保存 `docs/C端小程序开发规划.md`。
2.  确认文档内容符合 `.trae/rules` 中的要求。
