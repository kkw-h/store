# 💻 社区购商家后台管理系统 (PC端) - 产品文档 V1.0

| 文档版本 | V1.0 |
| :--- | :--- |
| **面向角色** | 商家（店长、操作员） |
| **技术框架** | Vue 3 + Element Plus + Vite |
| **核心目标** | 实现商品的高效管理、订单的快速处理（接单/核销）及店铺基础设置。 |

---

## 1. 🗺️ 站点地图 (Site Map)

左侧侧边栏菜单结构规划如下：

*   **📊 工作台 (Dashboard)**
    *   数据概览
*   **🛍️ 商品管理**
    *   分类管理
    *   商品列表 (新增/编辑/上下架)
*   **🧾 订单管理**
    *   全部订单
    *   待处理 (待接单/待自提)
    *   售后/退款
*   **👥 用户管理**
    *   用户列表
*   **⚙️ 店铺设置**
    *   基础设置 (营业时间/运费)
    *   管理员设置

---

## 2. 📱 功能模块详解

### 2.1 📊 工作台 (Dashboard)
**优先级：P1**
**目标：** 让商家一眼看到今天生意怎么样，以及有多少活要干。

*   **数据卡片 (顶部)：**
    *   今日营业额 (元)
    *   今日订单数 (笔)
    *   待处理订单 (笔) - *点击跳转到订单管理*
    *   商品库存预警 (种) - *库存<10的商品数量*
*   **快捷入口：** 发布商品、核销订单、店铺装修。

---

### 2.2 🛍️ 商品管理 (Product)

#### 2.2.1 分类管理
*   **列表展示：** ID、分类名称、排序值、显示状态。
*   **操作：** 新增分类、编辑名称、删除分类（*注：分类下有商品时禁止删除*）。

#### 2.2.2 商品列表
**优先级：P0 (核心)**
*   **筛选栏：** 商品名称搜索、分类筛选、状态筛选(上架/下架)。
*   **列表字段：**
    *   图片 (缩略图)
    *   名称
    *   价格 (售价/原价)
    *   库存 (支持点击直接修改数字)
    *   销量
    *   状态 (Switch开关：上架/下架)
    *   操作 (编辑、删除)
*   **新增/编辑商品表单：**
    *   **基础信息：** 商品名称、所属分类、商品简介。
    *   **图片：** 上传组件 (支持拖拽，限制 2MB)。
    *   **规格价格：** 售价、划线价、库存数量。
    *   **标签：** 热销、新品 (Checkbox多选)。

---

### 2.3 🧾 订单管理 (Order) - ⚠️ 最复杂模块

#### 2.3.1 订单列表
**优先级：P0**
*   **Tab 切换：** 全部 | 待接单(配送) | 待自提 | 配送中 | 已完成 | 已取消
*   **列表字段：**
    *   订单号
    *   用户信息 (昵称/手机号)
    *   **配送方式：** 🔴配送 / 🔵自提 (用不同颜色Tag区分)
    *   总金额 / 实付金额
    *   下单时间
    *   **状态：** 对应后端状态码
    *   **操作区：** 详情、接单、拒单、核销

#### 2.3.2 核心操作逻辑
1.  **接单 (仅配送单)：**
    *   当状态为 `待接单` 时显示。
    *   点击“接单” -> 状态变更为 `配送中` -> 触发微信订阅消息通知用户。
    *   点击“拒单” -> 弹出输入框填写理由 -> 状态变更为 `已退款` -> 触发自动退款。

2.  **核销 (仅自提单)：**
    *   **方式一 (列表操作)：** 商家在列表看到用户来了，直接点击“确认提货”。
    *   **方式二 (顶部全局搜索)：** 页面右上角提供一个“核销码输入框”。
        *   输入 6 位数字 -> 回车 -> 弹窗显示订单详情 -> 确认核销。

3.  **打印小票：**
    *   订单详情页需有一个 `🖨️ 打印` 按钮。
    *   前端调用浏览器打印功能，或调用后端接口触发云打印机。

---

### 2.4 ⚙️ 店铺设置 (Settings)
**优先级：P1**

*   **营业状态：**
    *   **营业中/休息中** (Switch 开关)。关闭后小程序端显示“打烊”，禁止下单。
*   **营业时间设置：**
    *   开始时间 - 结束时间 (如 09:00 - 22:00)。
*   **配送规则：**
    *   基础运费：(输入框，如 3.00 元)
    *   起送金额：(输入框，如 20.00 元)
    *   免运费门槛：(输入框，如 满 50 包邮)
*   **店铺信息：**
    *   店铺名称、联系电话、店铺地址、门头照片。

---

## 3. 🎨 UI/UX 交互规范 (基于 Element Plus)

为了保证开发效率，请严格遵守以下规范，不要过度设计：

1.  **表格 (Table)：**
    *   所有表格必须带分页 (Pagination)。
    *   金额字段右对齐，其他字段左对齐。
    *   空数据展示 "暂无数据" 占位图。

2.  **弹窗 (Dialog)：**
    *   新增/编辑操作尽量使用弹窗，避免页面跳转，保持上下文。
    *   弹窗底部统一为 `取消` (左) 和 `确定` (右，高亮)。

3.  **反馈 (Feedback)：**
    *   操作成功：`ElMessage.success('操作成功')`
    *   操作失败：`ElMessage.error('错误信息')`
    *   删除确认：必须使用 `ElMessageBox.confirm` 二次确认。

---

## 4. 🔌 接口对接简表 (前端开发参考)

| 页面模块 | 对应 API 路径 (示例) | 请求方式 | 备注 |
| :--- | :--- | :--- | :--- |
| **登录** | `/auth/login` | POST | 账号密码登录 |
| **商品列表** | `/admin/product/list` | GET | 需带分页参数 |
| **商品保存** | `/admin/product/save` | POST | 新增和修改共用 |
| **文件上传** | `/upload/image` | POST | 返回图片 URL |
| **订单列表** | `/admin/order/list` | GET | 支持按状态筛选 |
| **订单操作** | `/admin/order/status` | POST | 接单/发货/完成 |
| **核销验证** | `/admin/order/verify` | POST | 传 code |
| **店铺配置** | `/admin/shop/config` | GET/POST | 获取或保存 |